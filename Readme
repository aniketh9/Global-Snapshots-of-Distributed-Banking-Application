
Project contains below files and directories :

1.Directory: "gen-java", contains java files generated by "bank.thrift" IDL file.

2.Directory: "src", contains Controller,Branch,BranchHandler and data object classes,below are the details :
 
 1.Controller.java:
 > It initializes Branch Balance and triggers start and retrieve methods for SnapShots.

 2.DistributedBranch.java
 > Creates a branch instance and starts two threads :
	a. TThreadPoolServer which listens on a given port for RPC requests.
	b. Sender Thread which sends money to other Branches randomly.
 3.DBranchHandler.java 
 > Handler class that Implements "initBranch" , "transferMoney", "initSnapshot", "Marker"  and "retrieveSnapshot" methods.

 4.LocalState.java
 > Data Object class which is used to store "Local State" of a branch for a given snapshotID.

 5.ChannelState.java
 > Data Object class which is used to store "Incoming Channel Recordings" for a given branch and snapshotID.

3.makefile:
 > Compiles the src code ,that will be used by controller.sh and branch.sh bash scripts.

4.controller.sh:
 >Bash script which takes TOTAL_AMOUNT BRANCHS_LIST_FILE  as arguments and starts the Controller .

5.branch.sh:
 >Bash script which takes BRANCHNAME PORTNUMBER as arguments and starts the Branch Instance.
 
How to Run:

step 1:  Extract amalles1-project1.tar.gz and go to directory amalles1-project1
step 2:  make
step 3:  ./controller.sh TOTAL_AMOUNT BRANCHS_LIST_FILE
step 4:  ./branch.sh HOSTNAME PORTNUMBER 


Sample Input/Output of above steps :

1. Starting branch sample:
amalles1@remote01:~/ds/Project2/amalles1-project2$ ./branch.sh branch1 9081
Starting branch1 on port : 9081

amalles1@remote02:~/ds/Project2/amalles1-project2$ ./branch.sh branch2 9082
Starting branch2 on port : 9082

amalles1@remote03:~/ds/Project2/amalles1-project2$ ./branch.sh branch3 9083
Starting branch3 on port : 9083

2. Starting Controller sample:
amalles1@remote07:~/ds/Project2/amalles1-project2$ ./controller.sh 600 input.txt
Sent Branch-List and Initial-Balance:200 to branch1
Sent Branch-List and Initial-Balance:200 to branch2
Sent Branch-List and Initial-Balance:200 to branch3
GLOBAL SNAPSHOT FOR ID:: 1

branch1 balance: 198    branch2->branch1::0     branch3->branch1::0

branch2 balance: 200    branch1->branch2::0     branch3->branch2::0

branch3 balance: 202    branch1->branch3::0     branch2->branch3::0

Total Channel Money that is in transit: 0
Aggregrated  Branch Balance:  is: 600

GLOBAL SNAPSHOT FOR ID:: 2

branch1 balance: 192    branch2->branch1::0     branch3->branch1::0

branch2 balance: 196    branch1->branch2::0     branch3->branch2::0

branch3 balance: 212    branch1->branch3::0     branch2->branch3::0

Total Channel Money that is in transit: 0
Aggregrated  Branch Balance:  is: 600

3.Input Sample:
amalles1@remote07:~/ds/Project2/amalles1-project2$ cat input.txt
branch1 128.226.180.163 9081
branch2 128.226.180.164 9082
branch3 128.226.180.165 9083

